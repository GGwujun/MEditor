/*!
 *  * mobeditor v1.0.0
 *  * (c) 2017-09-10--2017-11-24 dsx
 *  * Released under the ISC License.
 *  * https://github.com/GGwujun/MobEditor#readme
 *  * 富文本编辑器，移动端富文本编辑器，编辑器，手机富文本编辑器
 */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var o=t();for(var l in o)("object"==typeof exports?exports:e)[l]=o[l]}}(this,function(){return function(e){function t(l){if(o[l])return o[l].exports;var r=o[l]={i:l,l:!1,exports:{}};return e[l].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,l){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:l})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={_debug:!1,_version:"1.6",_notctname:["INPUT","IMG","TEXTAREA"],placeHolder:'<p class="Eleditor-placeholder">点击此处编辑内容</p>',toolbars:["insertText","editText","insertImage","insertLink","deleteBefore","deleteAfter","insertHr","deleteThis","undo","cancel"],_toolnames:{insertText:"插文字",insertImage:"插图片",insertLink:"插链接",insertHr:"水平线",deleteBefore:"删除前",deleteAfter:"删除后",editText:"改文字",deleteThis:"删除",undo:"撤销",cancel:"取消"}};t.default=l},function(e,t,o){"use strict";function l(e,t){r._lastScrollH=null,r._$window=$(window),r._$editorWrap=e,r._$editorController=r._$editorWrap,r._$editorLoadingMask=r._$editorWrap.find(".Eleditor-loading"),r._$wrap=t,r._$scrollWrap=$("html,body"),r._$editorUndoBtn=r._$editorWrap.find(".Eleditor-undo"),r._$editorBarUploadImageBtn=r._$editorWrap.find(".Eleditor-textStyle-item-upImg"),r._$editorUploadImageBtn=r._$editorWrap.find(".Eleditor-insertImage"),r._$editorTextModule=r._$editorWrap.find(".Eleditor-textEditor"),r._$editorTextArea=r._$editorTextModule.find(".Eleditor-inputarea .textarea"),r._$editorTextLinkArea=r._$editorTextModule.find(".Eleditor-inputarea input"),r._$editorColorModule=r._$editorTextModule.find(".Eleditor-textEditor-colors"),r._$editorFontsizeModule=r._$editorTextModule.find(".Eleditor-textEditor-fontsizes"),r._$editorLineheightModule=r._$editorTextModule.find(".Eleditor-textEditor-lineheight"),r._$editorLinedecorationsModule=r._$editorTextModule.find(".Eleditor-textEditor-linedecorations")}Object.defineProperty(t,"__esModule",{value:!0}),t.initele=l;var r=t.selectors=Object.create(null)},function(e,t,o){"use strict";function l(){var e=document.scripts;e=e[e.length-1].src.substring(0,e[e.length-1].src.lastIndexOf("/")+1);var t='<link rel="stylesheet" href="'+e+"layout/base.css"+(a.default._debug?"?v="+ +new Date:"")+'">';return $("head").append(t),e}function r(e,t){for(var o in t)if(t[o]==e)return!0;return!1}function i(e){var t=e.replace(/\ +/g,"");return t=e.replace(/[ ]/g,""),t=e.replace(/[\r\n]/g,""),t.replace(/(^\s*)|(\s*$)/g,"")}function s(){var e=Math.max.apply(null,$.map($("body *"),function(e){var t=$(e);if("static"!=t.css("position"))return parseInt(t.css("z-index"))||1}));return(e+"").indexOf("Infinity")>=0?1:e+1}function n(){return""+ +new Date}Object.defineProperty(t,"__esModule",{value:!0}),t._scriptPath=l,t._inArray=r,t._formatInnerText=i,t._getLayerMaxZIndex=s,t._genEditorUid=n;var d=o(0),a=function(e){return e&&e.__esModule?e:{default:e}}(d)},function(e,t,o){"use strict";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Text=void 0;var r=function(){function e(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,o,l){return o&&e(t.prototype,o),l&&e(t,l),t}}(),i=o(2),s=o(1),n=o(4);t.Text=function(){function e(t){l(this,e),this.bindevent(t)}return r(e,[{key:"_syncRenderTextEditorView",value:function(e){s.selectors._$editorTextModule.attr("role","edit").show(),s.selectors._$editorTextArea.html(s.selectors._$selected.hasClass("Eleditor-placeholder")?"":s.selectors._$selected.html()),s.selectors._$editorTextArea.attr("style",s.selectors._$selected.attr("style")),"bold"==s.selectors._$selected.css("font-weight")&&s.selectors._$editorTextModule.find(".Eleditor-textStyle-bold").addClass("Eleditor-active"),(0,i._inArray)(s.selectors._$selected.css("text-decoration"),["overline","line-through","underline"])&&s.selectors._$editorTextModule.find(".Eleditor-textStyle-linedecoration").addClass("Eleditor-active"),"A"==s.selectors._$selected[0].tagName?(s.selectors._$editorTextModule.attr("type","link"),s.selectors._$editorTextLinkArea.val(s.selectors._$selected.attr("href"))):s.selectors._$editorTextModule.attr("type","word");var t=s.selectors._$selected.css("text-align");(0,i._inArray)(t,["left","center","right"])?s.selectors._$editorTextModule.find(".Eleditor-textStyle-align[align="+t+"]").addClass("Eleditor-active"):s.selectors._$editorTextModule.find(".Eleditor-textStyle-align").removeClass("Eleditor-active"),s.selectors._$editorTextModule.find(".Eleditor-textStyle-color span").css("background-color",s.selectors._$selected.css("color"))}},{key:"bindevent",value:function(e){s.selectors._$editorTextModule.on("click",".Eleditor-textStyle-bold",function(){s.selectors._$editorTextArea.css("font-weight",$(this).hasClass("Eleditor-active")?"normal":"bold"),$(this).toggleClass("Eleditor-active")}),s.selectors._$editorTextModule.on("click",".Eleditor-textStyle-linedecoration",function(){s.selectors._$editorLinedecorationsModule.show(),$(this).addClass("Eleditor-active")}),s.selectors._$editorTextModule.on("click",".Eleditor-textStyle-color,.Eleditor-textStyle-bgColor",function(){var e=$(this),t=e.hasClass("Eleditor-textStyle-bgColor")?"bgcolor":"color";s.selectors._$editorColorModule.find(".Eleditor-textEditor-modulePane span").html("bgcolor"==t?"文字背景颜色":"文字颜色"),s.selectors._$editorColorModule.attr("role",t).show(),$(this).addClass("Eleditor-active")}),s.selectors._$editorTextModule.on("click",".Eleditor-textStyle-fontSize",function(){s.selectors._$editorFontsizeModule.show(),$(this).addClass("Eleditor-active")}),s.selectors._$editorTextModule.on("click",".Eleditor-textStyle-lineHeight",function(){s.selectors._$editorLineheightModule.show(),$(this).addClass("Eleditor-active")}),s.selectors._$editorLinedecorationsModule.on("click","ul li",function(){$(this).hasClass("Eleditor-inheritValue")?(s.selectors._$editorTextArea.css("text-decoration","inherit"),s.selectors._$editorTextModule.find(".Eleditor-textStyle-linedecoration").removeClass("Eleditor-active")):s.selectors._$editorTextArea.css("text-decoration",$(this).css("text-decoration")),s.selectors._$editorLinedecorationsModule.hide()}),s.selectors._$editorLineheightModule.on("click","ul li",function(){$(this).hasClass("Eleditor-inheritValue")?(s.selectors._$editorTextArea.css("line-height","inherit"),s.selectors._$editorTextModule.find(".Eleditor-textStyle-lineHeight").removeClass("Eleditor-active")):s.selectors._$editorTextArea.css("line-height",$(this).html()),s.selectors._$editorLineheightModule.hide()}),s.selectors._$editorFontsizeModule.on("click","ul li",function(){$(this).hasClass("Eleditor-inheritValue")?(s.selectors._$editorTextArea.css("font-size","inherit"),s.selectors._$editorTextModule.find(".Eleditor-textStyle-fontSize").removeClass("Eleditor-active")):s.selectors._$editorTextArea.css("font-size",$(this).html()),s.selectors._$editorFontsizeModule.hide()}),s.selectors._$editorTextModule.on("click",".Eleditor-textStyle-align",function(){var e=$(this).attr("align");s.selectors._$editorTextArea.css({"text-align":e,display:"block"}),s.selectors._$editorTextModule.find(".Eleditor-textStyle-align.Eleditor-active").removeClass("Eleditor-active"),$(this).addClass("Eleditor-active")}),s.selectors._$editorTextModule.on("click",".Eleditor-textEditor-format",function(){var e=s.selectors._$editorTextArea,t="style width height border bgcolor align color";e.removeAttr(t),$.each(e.find("*"),function(o,l){var r=e.find(l);(0,i._inArray)(l.tagName.toLocaleLowerCase(),["script","style"])?r.remove():r.removeAttr(t)}),s.selectors._$editorTextArea.html(e.html()),s.selectors._$editorTextModule.find(".Eleditor-active").removeClass("Eleditor-active")}),s.selectors._$editorTextModule.on("click",".Eleditor-textEditor-clean",function(){confirm("确定清空内容（不可恢复）？")&&s.selectors._$editorTextArea.html("")}),s.selectors._$editorTextModule.on("click",".Eleditor-cancel,.Eleditor-commit",function(){if(arguments[0].preventDefault(),$(this).hasClass("Eleditor-commit")){var t=s.selectors._$editorTextArea.attr("style")||"",o=s.selectors._$editorTextArea.html(),l=s.selectors._$selected.clone();if(!o)return alert("请输入内容文字");if("edit"==s.selectors._$editorTextModule.attr("role")||s.selectors._$selected.hasClass("Eleditor-placeholder")){if("link"==s.selectors._$editorTextModule.attr("type")){var r=s.selectors._$editorTextLinkArea.val();_$selected.attr("href",r)}s.selectors._$selected.attr("style",t).removeClass("Eleditor-placeholder").html(o),(0,n._appendHistory)(e,{m:"editNode",node:s.selectors._$selected,unode:l})}else{var i="";if("link"==s.selectors._$editorTextModule.attr("type")){var r=s.selectors._$editorTextLinkArea.val();i='<a target="_BLANK" style="'+t+'" href="'+r+'">'+o+"</a>"}else i='<p style="'+t+'">'+o+"</p>";var i=$(i);s.selectors._$selected.after(i),(0,n._appendHistory)(e,{m:"insertNode",node:i})}}s.selectors._$editorTextModule.find(".Eleditor-active").removeClass("Eleditor-active"),s.selectors._$editorTextModule.find(".Eleditor-textStyle-color span").removeAttr("style"),s.selectors._$editorTextArea.removeAttr("style").html(""),s.selectors._$editorTextLinkArea.val(""),(0,n._hideEditorWrapMask)(),s.selectors._$editorTextModule.hide(),(0,n._hideEditorControllerLayer)()}),s.selectors._$editorColorModule.on("click","ul li span",function(){var e=$(this).css("background-color");"color"==s.selectors._$editorColorModule.attr("role")?$(this).hasClass("Eleditor-inheritValue")?(s.selectors._$editorTextArea.css("color","inherit"),s.selectors._$editorTextModule.find(".Eleditor-textStyle-color").removeClass("Eleditor-active").find("span").removeAttr("style")):(s.selectors._$editorTextArea.css("color",e),s.selectors._$editorTextModule.find(".Eleditor-textStyle-color span").css("background-color",e)):$(this).hasClass("Eleditor-inheritValue")?(s.selectors._$editorTextArea.css("background-color","inherit"),s.selectors._$editorTextModule.find(".Eleditor-textStyle-bgColor").removeClass("Eleditor-active")):s.selectors._$editorTextArea.css("background-color",e),s.selectors._$editorColorModule.hide()})}}]),e}()},function(e,t,o){"use strict";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var o='\n                <div class="Eleditor-wrap" style="z-index:'+(0,x._getLayerMaxZIndex)()+'" id="'+t+'">\n                    <div class="Eleditor-controller">\n                <ul>\n                ',l=0;l<e.length;l++){var r=e[l],i="object"===(void 0===r?"undefined":_(r))?r.id:r,s="object"===(void 0===r?"undefined":_(r))&&r.tag?r.tag.toLocaleLowerCase():null,n="object"===(void 0===r?"undefined":_(r))?r.name:y.default._toolnames[r];o+='<li event="'+i+'" '+(s?'bind-tags="'+s+'"':"")+'class="Eleditor-'+i+'">'+n+"</li>"}return o+='\t\t\n            </ul></div>\n                <div class="Eleditor-loading"><p></p></div>\n                <div class="Eleditor-textEditor">\n                    <div class="Eleditor-textStyle">\n                        <div class="Eleditor-textStyle-item"><div class="Eleditor-textStyle-bold"></div></div>\n                        <div class="Eleditor-textStyle-item"><div class="Eleditor-textStyle-color"><span></span></div></div>\n                        <div class="Eleditor-textStyle-item"><div class="Eleditor-textStyle-linedecoration"></div></div>\n                        <div class="Eleditor-textStyle-item"><div class="Eleditor-textStyle-bgColor"></div></div>\n                        <div class="Eleditor-textStyle-item"><div class="Eleditor-textStyle-fontSize"></div></div>\n                        <div class="Eleditor-textStyle-item"><div class="Eleditor-textStyle-lineHeight"></div></div>\n                        <div class="Eleditor-textStyle-item">\n                            <div class="Eleditor-textStyle-align Eleditor-textStyle-alignLeft" align="left"></div>\n                        </div>\n                        <div class="Eleditor-textStyle-item">\n                            <div class="Eleditor-textStyle-align Eleditor-textStyle-alignCenter" align="center">\n                            </div>\n                        </div>\n                        <div class="Eleditor-textStyle-item">\n                            <div class="Eleditor-textStyle-align Eleditor-textStyle-alignRight" align="right">\n                            </div>\n                        </div>\n                        <div class="Eleditor-textStyle-item Eleditor-textStyle-item-upImg">\n                            <div class="Eleditor-textStyle-upImg"></div>\n                        </div>\n                    </div>\n                    <div class="Eleditor-textEditor-colors">\n                        <div class="Eleditor-textEditor-modulePane"><span></span></div>\n                        <ul>\n                            <li><span style="background-color:#232323;"></span></li>\n                            <li><span style="background-color:#2196F3;"></span></li>\n                            <li><span style="background-color:#795548;"></span></li>\n                            <li><span style="background-color:#00BCD4;"></span></li>\n                            <li><span style="background-color:#4CAF50;"></span></li>\n                            <li><span style="background-color:#E666E5;"></span></li>\n                            <li><span style="background-color:#FF9800;"></span></li>\n                            <li><span style="background-color:#FF5722;"></span></li>\n                            <li><span style="background-color:#ff2a1a;"></span></li>\n                            <li><span style="background-color:#FFEB3B;"></span></li>\n                            <li><span style="background-color:#ffffff;border: 1px solid #ccc;"></span></li>\n                            <li>\n                                <span class="Eleditor-inheritValue" style="background-color:transparent; border: 1px solid #dedede;">\n                                </span>\n                            </li>\n                        </ul>\n                    </div>\n                    <div class="Eleditor-textEditor-fontsizes">\n                        <div class="Eleditor-textEditor-modulePane"><span>字体大小</span></div>\n                        <ul>\n                            <li class="Eleditor-inheritValue">默认</li>\n                            <li>14px</li>\n                            <li>16px</li>\n                            <li>20px</li>\n                            <li>28px</li>\n                            <li>35px</li>\n                        </ul>\n                    </div>\n                    <div class="Eleditor-textEditor-lineheight">\n                        <div class="Eleditor-textEditor-modulePane"><span>行高</span></div>\n                        <ul>\n                            <li class="Eleditor-inheritValue">默认</li>\n                            <li>20px</li>\n                            <li>25px</li>\n                            <li>30px</li>\n                            <li>35px</li>\n                            <li>40px</li>\n                        </ul>\n                    </div>\n                    <div class="Eleditor-textEditor-linedecorations">\n                        <div class="Eleditor-textEditor-modulePane"><span>文本修饰</span></div>\n                        <ul>\n                            <li class="Eleditor-inheritValue">无</li>\n                            <li style="text-decoration: overline">上划线修饰</li>\n                            <li style="text-decoration: line-through">删除线修饰</li>\n                            <li style="text-decoration: underline">下划线修饰</li>\n                        </ul>\n                    </div>\n                    <div class="Eleditor-textEditor-formats">\n                        <div class="Eleditor-textEditor-format"></div>\n                        <div class="Eleditor-textEditor-clean"></div>\n                    </div>\n                    <div class="Eleditor-inputarea">\n                        <input placeholder="请输入超链接" type="text" />\n                        <div class="textarea" contenteditable="true"></div>\n                    </div>\n                    <div class="Eleditor-method">\n                        <button class="Eleditor-commit">提交</button>\n                        <button class="Eleditor-cancel">取消</button>\n                    </div>\n                </div>\n            </div>\n            '}function i(e){C.selectors._$selected=e;e.addClass("Eleditor-active");var t=e.offset().top+e.outerHeight();$.each(C.selectors._$editorController.find("li"),function(e,t){var o=$(t),l=o.attr("bind-tags");l&&(l=l.toLocaleLowerCase().split(","),(0,x._inArray)(C.selectors._$selected[0].tagName.toLocaleLowerCase(),l)?o.show():o.hide())}),C.selectors._$editorController.removeClass("out").addClass("in"),"function"==typeof C.selectors._$scrollWrap.animate?C.selectors._$scrollWrap.stop().animate({scrollTop:t-150+"px"},500):C.selectors._$scrollWrap.scrollTop(t-150+"px"),m._controllerUploader&&m._controllerUploader.refresh()}function s(){C.selectors._$wrap.find(".Eleditor-active").removeClass("Eleditor-active"),C.selectors._$editorController.removeClass("in").addClass("out")}function n(){(0,x._inArray)("insertImage",y.default.toolbars)&&C.selectors._$editorBarUploadImageBtn.show(),C.selectors._$editorController.removeClass("in").addClass("out"),C.selectors._$editorWrap.addClass("Eleditor-mask"),C.selectors._lastScrollH=C.selectors._$window.scrollTop(),C.selectors._$scrollWrap.addClass("Eleditor-scrollLocked")}function d(){C.selectors._$editorWrap.removeClass("Eleditor-mask out"),C.selectors._$scrollWrap.removeClass("Eleditor-scrollLocked"),C.selectors._$window.scrollTop(C.selectors._lastScrollH)}function a(){C.selectors._showEditorWrapMask(),C.selectors._$editorLoadingMask.show(),C.selectors._$editorLoadingMask.html("<p>"+arguments[0]+"</p>")}function c(){d(),C.selectors._$editorLoadingMask.hide()}function u(e,t){e._historys.push(t),f(e)}function p(e){if(0!==e._historys.length){var t=e._historys.pop();if("insertNode"==t.m&&t.node.remove(),"editNode"==t.m&&t.node.attr("style",t.unode.attr("style")||"").html(t.unode),"deleteNode"==t.m&&(t.pnode.length>0?t.pnode.after(t.node):C.selectors._$wrap.prepend(t.node),C.selectors._$wrap.find(".Eleditor-placeholder").remove()),"deleteBeforeNode"==t.m)for(var o=t.bnode.length-1;o>=0;o--)t.node.before(t.bnode[o]);"deleteAfterNode"==t.m&&t.node.after(t.anode),f()}}function f(e){0==e._historys.length?C.selectors._$editorUndoBtn.hide():C.selectors._$editorUndoBtn.show()}function v(){C.selectors._$selected&&C.selectors._$editorController.css({top:_$selected.offset().top+_$selected.outerHeight(),width:_$wrap.width()-5})}Object.defineProperty(t,"__esModule",{value:!0}),t._correctHtmlStructure=void 0;var _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E=function(){function e(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,o,l){return o&&e(t.prototype,o),l&&e(t,l),t}}();t._buildEditorModule=r,t._showEditorControllerLayer=i,t._hideEditorControllerLayer=s,t._showEditorWrapMask=n,t._hideEditorWrapMask=d,t._showLoadingMask=a,t._hideLoadingMask=c,t._appendHistory=u,t._handleHistory=p,t._flushHistoryBtn=f,t._flushEditorControllerLayerPosi=v;var h=o(0),y=function(e){return e&&e.__esModule?e:{default:e}}(h),x=o(2),m=o(6),g=o(5),b=o(7),C=o(1),M=o(3),S=function(){function e(t){l(this,e),this.init(t)}return E(e,[{key:"init",value:function(e){console.log("|--Eleditor Initing"),(0,x._scriptPath)();var t=Object.assign({},y.default,e);Object.assign(y.default,e);var o=(0,x._genEditorUid)();if(this._historys=[],t.el instanceof jQuery)var l=t.el;else{var l=$(t.el);if(0===l.length)return console.warn("|--Eleditor "+t.el+"元素不存在，请在DOMContentLoaded后初始化Eleditor");if(1!=l.length)var l=$(l[0])}if("true"===l.attr("Eleditor-Inited"))return console.warn("|--Eleditor "+t.el+"已经绑定了Eleditor");l.attr({"Eleditor-Inited":"true","Eleditor-Uid":o}),T(l,t.placeHolder);var n=$(r(t.toolbars,o));l.addClass("Eleditor-area"),l.after(n),(0,C.initele)(n,l),console.log("|--Eleditor Mounted To",l),(0,g.initEvent)(t);l.on("click","*",function(e){var t=$(this);return t.hasClass("Eleditor-active")||(s(),i(t)),0==e.preventDefault()}),(0,b.initTool)(this),(0,m.initUpload)(this),this.Text=new M.Text(this)}},{key:"append",value:function(){return C.selectors._$wrap.find(".Eleditor-placeholder").remove(),C.selectors._$wrap.append(arguments[0])}},{key:"getEditNode",value:function(){return null===_$selected&&console.warn("未选中状态getEditNode返回null"),_$selected}},{key:"getContent",value:function(){return C.selectors._$wrap.html()}},{key:"getContentText",value:function(){return(0,x._formatInnerText)(C.selectors._$wrap.text())}},{key:"destory",value:function(){C.selectors._$wrap.removeAttr("Eleditor-Inited Eleditor-Uid"),C.selectors._$wrap.removeClass("Eleditor-area"),C.selectors._$wrap.find(".Eleditor-placeholder").remove(),C.selectors._$wrap.off().find(".Eleditor-active").removeClass("Eleditor-active"),C.selectors._$editorWrap.find("*").off(),C.selectors._$editorWrap.remove(),console.log("|--Eleditor "+this._editorUid+" destoryed")}}]),e}();t.default=S;var T=t._correctHtmlStructure=function(e,t){""==(0,x._formatInnerText)(e.text())&&0===e.find("img").length&&e.append(t),0===e.find("*").length&&e.html('<p class="Eleditor-placeholder">'+e.html()+"</p>")}},function(e,t,o){"use strict";function l(){for(var e=0;e<n.default.toolbars.length;e++)"object"===r(n.default.toolbars[e])&&(c[n.default.toolbars[e].id]=n.default.toolbars[e].handle)}Object.defineProperty(t,"__esModule",{value:!0}),t._editorModuleEvents=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.initEvent=l;var i=o(2),s=o(0),n=function(e){return e&&e.__esModule?e:{default:e}}(s),d=(o(3),o(1)),a=o(4),c=t._editorModuleEvents={insertText:function(e){(0,a._showEditorWrapMask)(),d.selectors._$editorTextModule.attr({role:"insert",type:"word"}).show()},insertLink:function(e){(0,a._showEditorWrapMask)(),d.selectors._$editorTextModule.attr({role:"insert",type:"link"}).show()},insertImage:function(e){"undefined"==typeof WebUploader&&alert("图片上传请手动引入插件根目录webuploader.min.js")},insertHr:function(e){var t=$('<div class="horizontal-line" style="padding: 10px 0;border-bottom: 1px solid #aaa;margin-bottom: 20px;"></div>');d.selectors._$selected.after(t),(0,a._appendHistory)(e,{m:"insertNode",node:t}),(0,a._hideEditorControllerLayer)()},editText:function(e){if((0,i._inArray)(d.selectors._$selected[0].tagName,n.default._notctname))return this.insertText(e);(0,a._showEditorWrapMask)(),e.Text._syncRenderTextEditorView(e)},deleteThis:function(e){(0,a._appendHistory)(e,{m:"deleteNode",node:d.selectors._$selected,pnode:d.selectors._$selected.prev()}),d.selectors._$selected.remove(),(0,a._hideEditorControllerLayer)(),(0,a._correctHtmlStructure)(d.selectors._$wrap,n.default.placeHolder)},deleteBefore:function(e){var t=d.selectors._$selected.prev();(0,a._appendHistory)(e,{m:"deleteBeforeNode",node:d.selectors._$selected,bnode:d.selectors._$selected.prevAll()});for(var o;t.length>0;)o=t.prev(),t.remove(),t=o;for(var l=d.selectors._$selected.parent();l.length>0&&!l.hasClass("Eleditor-area");){for(t=l.prev();t.length>0;)o=t.prev(),t.remove(),t=o;l=l.parent()}(0,a._hideEditorControllerLayer)(),(0,a._correctHtmlStructure)(d.selectors._$wrap,n.default.placeHolder)},deleteAfter:function(e){var t=d.selectors._$selected.next();(0,a._appendHistory)(e,{m:"deleteAfterNode",node:d.selectors._$selected,anode:d.selectors._$selected.nextAll()});for(var o;t.length>0;)o=t.next(),t.remove(),t=o;for(var l=d.selectors._$selected.parent();l.length>0&&!l.hasClass("Eleditor-area");){for(t=l.next();t.length>0;)o=t.next(),t.remove(),t=o;l=l.parent()}(0,a._hideEditorControllerLayer)(),(0,a._correctHtmlStructure)(d.selectors._$wrap,n.default.placeHolder)},undo:function(e){_handleHistory(),(0,a._hideEditorControllerLayer)()},cancel:function(e){(0,a._hideEditorControllerLayer)()}}},function(e,t,o){"use strict";function l(e){(0,s._inArray)("insertImage",i.default.toolbars)&&"undefined"!=typeof WebUploader&&(t._controllerUploader=a=WebUploader.create({auto:!0,server:i.default.upload.server||"/upload",pick:n.selectors._$editorUploadImageBtn,duplicate:!0,resize:!1,fileSingleSizeLimit:i.default.upload.fileSizeLimit?1024*i.default.upload.fileSizeLimit*1024:void 0,accept:{title:"Images",extensions:"gif,jpg,jpeg,bmp,png,webp",mimeTypes:"image/gif,image/jpg,image/jpeg,image/bmp,image/png,image/webp"}}),a.on("uploadStart",function(e,t){(0,d._hideEditorControllerLayer)(),_showLoadingMask('上传图片中<span id="uploadProgress">1</span>%')}),a.on("uploadProgress",function(e,t){$("#uploadProgress").html(parseFloat((100*t).toFixed(2)))}),a.on("error",function(){"Q_TYPE_DENIED"==arguments[0]&&alert("请上传图片格式文件"),"F_EXCEED_SIZE"==arguments[0]&&alert("文件大小不能超过"+arguments[1]/1048576+"M")}),a.on("uploadComplete",function(){e._hideLoadingMask()}),a.on("uploadSuccess",function(t,o){if(1==o.status){var l=$('<img src="'+o.url+'">');n.selectors._$selected.after(l),(0,d._appendHistory)(e,{m:"insertNode",node:l})}else alert(o.msg)}),t._stylebarUploader=c=WebUploader.create({auto:!0,server:i.default.upload.server||"/upload",pick:n.selectors._$editorBarUploadImageBtn,duplicate:!0,resize:!1,compress:!1,fileSingleSizeLimit:i.default.upload.fileSizeLimit?1024*i.default.upload.fileSizeLimit*1024:void 0,accept:{title:"Images",extensions:"gif,jpg,jpeg,bmp,png,webp",mimeTypes:"image/gif,image/jpg,image/jpeg,image/bmp,image/png,image/webp"}}),c.on("uploadStart",function(e,t){_showLoadingMask('上传图片中<span id="uploadProgress">1</span>%')}),c.on("uploadProgress",function(e,t){$("#uploadProgress").html(parseFloat((100*t).toFixed(2)))}),c.on("error",function(){"Q_TYPE_DENIED"==arguments[0]&&alert("请上传图片格式文件"),"F_EXCEED_SIZE"==arguments[0]&&alert("文件大小不能超过"+arguments[1]/1048576+"M")}),c.on("uploadComplete",function(){e._hideLoadingMask()}),c.on("uploadSuccess",function(e,t){1==t.status?n.selectors._$editorTextArea.append('<img src="'+t.url+'">'):alert(t.msg)}))}Object.defineProperty(t,"__esModule",{value:!0}),t._stylebarUploader=t._controllerUploader=void 0,t.initUpload=l;var r=o(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),s=o(2),n=(o(3),o(1)),d=o(4),a=t._controllerUploader=null,c=t._stylebarUploader=null},function(e,t,o){"use strict";function l(e){n.selectors._$editorController.on("click","ul li",function(){var t=$(this),o=t.attr("event");"function"==typeof s._editorModuleEvents[o]&&(void 0!==i.default._toolnames[o]?s._editorModuleEvents[o](e):!1!==s._editorModuleEvents[o](n.selectors._$selected,t)&&s._editorModuleEvents.cancel(e))})}Object.defineProperty(t,"__esModule",{value:!0}),t.initTool=l;var r=o(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),s=o(5),n=o(1)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mobeditor=void 0;var l=o(9),r=function(e){return e&&e.__esModule?e:{default:e}}(l);t.default=r.default,t.mobeditor=r.default},function(e,t,o){"use strict";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var o='\n                <div class="Eleditor-wrap" style="z-index:'+(0,x._getLayerMaxZIndex)()+'" id="'+t+'">\n                    <div class="Eleditor-controller">\n                <ul>\n                ',l=0;l<e.length;l++){var r=e[l],i="object"===(void 0===r?"undefined":_(r))?r.id:r,s="object"===(void 0===r?"undefined":_(r))&&r.tag?r.tag.toLocaleLowerCase():null,n="object"===(void 0===r?"undefined":_(r))?r.name:y.default._toolnames[r];o+='<li event="'+i+'" '+(s?'bind-tags="'+s+'"':"")+'class="Eleditor-'+i+'">'+n+"</li>"}return o+='\t\t\n            </ul></div>\n                <div class="Eleditor-loading"><p></p></div>\n                <div class="Eleditor-textEditor">\n                    <div class="Eleditor-textStyle">\n                        <div class="Eleditor-textStyle-item"><div class="Eleditor-textStyle-bold"></div></div>\n                        <div class="Eleditor-textStyle-item"><div class="Eleditor-textStyle-color"><span></span></div></div>\n                        <div class="Eleditor-textStyle-item"><div class="Eleditor-textStyle-linedecoration"></div></div>\n                        <div class="Eleditor-textStyle-item"><div class="Eleditor-textStyle-bgColor"></div></div>\n                        <div class="Eleditor-textStyle-item"><div class="Eleditor-textStyle-fontSize"></div></div>\n                        <div class="Eleditor-textStyle-item"><div class="Eleditor-textStyle-lineHeight"></div></div>\n                        <div class="Eleditor-textStyle-item">\n                            <div class="Eleditor-textStyle-align Eleditor-textStyle-alignLeft" align="left"></div>\n                        </div>\n                        <div class="Eleditor-textStyle-item">\n                            <div class="Eleditor-textStyle-align Eleditor-textStyle-alignCenter" align="center">\n                            </div>\n                        </div>\n                        <div class="Eleditor-textStyle-item">\n                            <div class="Eleditor-textStyle-align Eleditor-textStyle-alignRight" align="right">\n                            </div>\n                        </div>\n                        <div class="Eleditor-textStyle-item Eleditor-textStyle-item-upImg">\n                            <div class="Eleditor-textStyle-upImg"></div>\n                        </div>\n                    </div>\n                    <div class="Eleditor-textEditor-colors">\n                        <div class="Eleditor-textEditor-modulePane"><span></span></div>\n                        <ul>\n                            <li><span style="background-color:#232323;"></span></li>\n                            <li><span style="background-color:#2196F3;"></span></li>\n                            <li><span style="background-color:#795548;"></span></li>\n                            <li><span style="background-color:#00BCD4;"></span></li>\n                            <li><span style="background-color:#4CAF50;"></span></li>\n                            <li><span style="background-color:#E666E5;"></span></li>\n                            <li><span style="background-color:#FF9800;"></span></li>\n                            <li><span style="background-color:#FF5722;"></span></li>\n                            <li><span style="background-color:#ff2a1a;"></span></li>\n                            <li><span style="background-color:#FFEB3B;"></span></li>\n                            <li><span style="background-color:#ffffff;border: 1px solid #ccc;"></span></li>\n                            <li>\n                                <span class="Eleditor-inheritValue" style="background-color:transparent; border: 1px solid #dedede;">\n                                </span>\n                            </li>\n                        </ul>\n                    </div>\n                    <div class="Eleditor-textEditor-fontsizes">\n                        <div class="Eleditor-textEditor-modulePane"><span>字体大小</span></div>\n                        <ul>\n                            <li class="Eleditor-inheritValue">默认</li>\n                            <li>14px</li>\n                            <li>16px</li>\n                            <li>20px</li>\n                            <li>28px</li>\n                            <li>35px</li>\n                        </ul>\n                    </div>\n                    <div class="Eleditor-textEditor-lineheight">\n                        <div class="Eleditor-textEditor-modulePane"><span>行高</span></div>\n                        <ul>\n                            <li class="Eleditor-inheritValue">默认</li>\n                            <li>20px</li>\n                            <li>25px</li>\n                            <li>30px</li>\n                            <li>35px</li>\n                            <li>40px</li>\n                        </ul>\n                    </div>\n                    <div class="Eleditor-textEditor-linedecorations">\n                        <div class="Eleditor-textEditor-modulePane"><span>文本修饰</span></div>\n                        <ul>\n                            <li class="Eleditor-inheritValue">无</li>\n                            <li style="text-decoration: overline">上划线修饰</li>\n                            <li style="text-decoration: line-through">删除线修饰</li>\n                            <li style="text-decoration: underline">下划线修饰</li>\n                        </ul>\n                    </div>\n                    <div class="Eleditor-textEditor-formats">\n                        <div class="Eleditor-textEditor-format"></div>\n                        <div class="Eleditor-textEditor-clean"></div>\n                    </div>\n                    <div class="Eleditor-inputarea">\n                        <input placeholder="请输入超链接" type="text" />\n                        <div class="textarea" contenteditable="true"></div>\n                    </div>\n                    <div class="Eleditor-method">\n                        <button class="Eleditor-commit">提交</button>\n                        <button class="Eleditor-cancel">取消</button>\n                    </div>\n                </div>\n            </div>\n            '}function i(e){C.selectors._$selected=e;e.addClass("Eleditor-active");var t=e.offset().top+e.outerHeight();$.each(C.selectors._$editorController.find("li"),function(e,t){var o=$(t),l=o.attr("bind-tags");l&&(l=l.toLocaleLowerCase().split(","),(0,x._inArray)(C.selectors._$selected[0].tagName.toLocaleLowerCase(),l)?o.show():o.hide())}),C.selectors._$editorController.removeClass("out").addClass("in"),"function"==typeof C.selectors._$scrollWrap.animate?C.selectors._$scrollWrap.stop().animate({scrollTop:t-150+"px"},500):C.selectors._$scrollWrap.scrollTop(t-150+"px"),m._controllerUploader&&m._controllerUploader.refresh()}function s(){C.selectors._$wrap.find(".Eleditor-active").removeClass("Eleditor-active"),C.selectors._$editorController.removeClass("in").addClass("out")}function n(){(0,x._inArray)("insertImage",y.default.toolbars)&&C.selectors._$editorBarUploadImageBtn.show(),C.selectors._$editorController.removeClass("in").addClass("out"),C.selectors._$editorWrap.addClass("Eleditor-mask"),C.selectors._lastScrollH=C.selectors._$window.scrollTop(),C.selectors._$scrollWrap.addClass("Eleditor-scrollLocked")}function d(){C.selectors._$editorWrap.removeClass("Eleditor-mask out"),C.selectors._$scrollWrap.removeClass("Eleditor-scrollLocked"),C.selectors._$window.scrollTop(C.selectors._lastScrollH)}function a(){C.selectors._showEditorWrapMask(),C.selectors._$editorLoadingMask.show(),C.selectors._$editorLoadingMask.html("<p>"+arguments[0]+"</p>")}function c(){d(),C.selectors._$editorLoadingMask.hide()}function u(e,t){e._historys.push(t),f(e)}function p(e){if(0!==e._historys.length){var t=e._historys.pop();if("insertNode"==t.m&&t.node.remove(),"editNode"==t.m&&t.node.attr("style",t.unode.attr("style")||"").html(t.unode),"deleteNode"==t.m&&(t.pnode.length>0?t.pnode.after(t.node):C.selectors._$wrap.prepend(t.node),C.selectors._$wrap.find(".Eleditor-placeholder").remove()),"deleteBeforeNode"==t.m)for(var o=t.bnode.length-1;o>=0;o--)t.node.before(t.bnode[o]);"deleteAfterNode"==t.m&&t.node.after(t.anode),f()}}function f(e){0==e._historys.length?C.selectors._$editorUndoBtn.hide():C.selectors._$editorUndoBtn.show()}function v(){C.selectors._$selected&&C.selectors._$editorController.css({top:_$selected.offset().top+_$selected.outerHeight(),width:_$wrap.width()-5})}Object.defineProperty(t,"__esModule",{value:!0}),t._correctHtmlStructure=void 0;var _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E=function(){function e(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,o,l){return o&&e(t.prototype,o),l&&e(t,l),t}}();t._buildEditorModule=r,t._showEditorControllerLayer=i,t._hideEditorControllerLayer=s,t._showEditorWrapMask=n,t._hideEditorWrapMask=d,t._showLoadingMask=a,t._hideLoadingMask=c,t._appendHistory=u,t._handleHistory=p,t._flushHistoryBtn=f,t._flushEditorControllerLayerPosi=v;var h=o(0),y=function(e){return e&&e.__esModule?e:{default:e}}(h),x=o(2),m=o(6),g=o(5),b=o(7),C=o(1),M=o(3),S=function(){function e(t){l(this,e),this.init(t)}return E(e,[{key:"init",value:function(e){console.log("|--Eleditor Initing"),(0,x._scriptPath)();var t=Object.assign({},y.default,e);Object.assign(y.default,e);var o=(0,x._genEditorUid)();if(this._historys=[],t.el instanceof jQuery)var l=t.el;else{var l=$(t.el);if(0===l.length)return console.warn("|--Eleditor "+t.el+"元素不存在，请在DOMContentLoaded后初始化Eleditor");if(1!=l.length)var l=$(l[0])}if("true"===l.attr("Eleditor-Inited"))return console.warn("|--Eleditor "+t.el+"已经绑定了Eleditor");l.attr({"Eleditor-Inited":"true","Eleditor-Uid":o}),T(l,t.placeHolder);var n=$(r(t.toolbars,o));l.addClass("Eleditor-area"),l.after(n),(0,C.initele)(n,l),console.log("|--Eleditor Mounted To",l),(0,g.initEvent)(t);l.on("click","*",function(e){var t=$(this);return t.hasClass("Eleditor-active")||(s(),i(t)),0==e.preventDefault()}),(0,b.initTool)(this),(0,m.initUpload)(this),this.Text=new M.Text(this)}},{key:"append",value:function(){return C.selectors._$wrap.find(".Eleditor-placeholder").remove(),C.selectors._$wrap.append(arguments[0])}},{key:"getEditNode",value:function(){return null===_$selected&&console.warn("未选中状态getEditNode返回null"),_$selected}},{key:"getContent",value:function(){return C.selectors._$wrap.html()}},{key:"getContentText",value:function(){return(0,x._formatInnerText)(C.selectors._$wrap.text())}},{key:"destory",value:function(){C.selectors._$wrap.removeAttr("Eleditor-Inited Eleditor-Uid"),C.selectors._$wrap.removeClass("Eleditor-area"),C.selectors._$wrap.find(".Eleditor-placeholder").remove(),C.selectors._$wrap.off().find(".Eleditor-active").removeClass("Eleditor-active"),C.selectors._$editorWrap.find("*").off(),C.selectors._$editorWrap.remove(),console.log("|--Eleditor "+this._editorUid+" destoryed")}}]),e}();t.default=S;var T=t._correctHtmlStructure=function(e,t){""==(0,x._formatInnerText)(e.text())&&0===e.find("img").length&&e.append(t),0===e.find("*").length&&e.html('<p class="Eleditor-placeholder">'+e.html()+"</p>")}}])});