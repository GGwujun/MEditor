/*!
 *  * mobeditor v1.0.0
 *  * (c) 2017-09-10--2017-11-24 dsx
 *  * Released under the ISC License.
 *  * https://github.com/GGwujun/MobEditor#readme
 *  * 富文本编辑器，移动端富文本编辑器，编辑器，手机富文本编辑器
 */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var o=t();for(var r in o)("object"==typeof exports?exports:e)[r]=o[r]}}(this,function(){return function(e){function t(r){if(o[r])return o[r].exports;var l=o[r]={i:r,l:!1,exports:{}};return e[r].call(l.exports,l,l.exports,t),l.l=!0,l.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,r){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={_debug:!1,_version:"1.6",_notctname:["INPUT","IMG","TEXTAREA"],placeHolder:'<p class="Eleditor-placeholder">点击此处编辑内容</p>',toolbars:["insertText","editText","insertImage","insertLink","deleteBefore","deleteAfter","insertHr","deleteThis","undo","cancel"],_toolnames:{insertText:"插文字",insertImage:"插图片",insertLink:"插链接",insertHr:"水平线",deleteBefore:"删除前",deleteAfter:"删除后",editText:"改文字",deleteThis:"删除",undo:"撤销",cancel:"取消"}};t.default=r},function(e,t,o){"use strict";function r(e,t){l._lastScrollH=null,l._$window=$(window),l._$editorWrap=e,l._$editorController=l._$editorWrap,l._$editorLoadingMask=l._$editorWrap.find(".Eleditor-loading"),l._$wrap=t,l._$scrollWrap=$("html,body"),l._$editorUndoBtn=l._$editorWrap.find(".Eleditor-undo"),l._$editorBarUploadImageBtn=l._$editorWrap.find(".Eleditor-textStyle-item-upImg"),l._$editorUploadImageBtn=l._$editorWrap.find(".Eleditor-insertImage"),l._$editorTextModule=l._$editorWrap.find(".Eleditor-textEditor"),l._$editorTextArea=l._$editorTextModule.find(".Eleditor-inputarea .textarea"),l._$editorTextLinkArea=l._$editorTextModule.find(".Eleditor-inputarea input"),l._$editorColorModule=l._$editorTextModule.find(".Eleditor-textEditor-colors"),l._$editorFontsizeModule=l._$editorTextModule.find(".Eleditor-textEditor-fontsizes"),l._$editorLineheightModule=l._$editorTextModule.find(".Eleditor-textEditor-lineheight"),l._$editorLinedecorationsModule=l._$editorTextModule.find(".Eleditor-textEditor-linedecorations")}Object.defineProperty(t,"__esModule",{value:!0}),t.initele=r;var l=t.selectors=Object.create(null)},function(e,t,o){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var o='\n                <div class="Eleditor-wrap" style="z-index:'+(0,y._getLayerMaxZIndex)()+'" id="'+t+'">\n                    <div class="Eleditor-controller">\n                <ul>\n                ',r=0;r<e.length;r++){var l=e[r],i="object"===(void 0===l?"undefined":v(l))?l.id:l,s="object"===(void 0===l?"undefined":v(l))&&l.tag?l.tag.toLocaleLowerCase():null,n="object"===(void 0===l?"undefined":v(l))?l.name:x.default._toolnames[l];o+='<li event="'+i+'" '+(s?'bind-tags="'+s+'"':"")+'class="Eleditor-'+i+'">'+n+"</li>"}return o+='\t\t\n            </ul></div>\n                <div class="Eleditor-loading"><p></p></div>\n                <div class="Eleditor-textEditor">\n                    <div class="Eleditor-textStyle">\n                        <div class="Eleditor-textStyle-item"><div class="Eleditor-textStyle-bold"></div></div>\n                        <div class="Eleditor-textStyle-item"><div class="Eleditor-textStyle-color"><span></span></div></div>\n                        <div class="Eleditor-textStyle-item"><div class="Eleditor-textStyle-linedecoration"></div></div>\n                        <div class="Eleditor-textStyle-item"><div class="Eleditor-textStyle-bgColor"></div></div>\n                        <div class="Eleditor-textStyle-item"><div class="Eleditor-textStyle-fontSize"></div></div>\n                        <div class="Eleditor-textStyle-item"><div class="Eleditor-textStyle-lineHeight"></div></div>\n                        <div class="Eleditor-textStyle-item">\n                            <div class="Eleditor-textStyle-align Eleditor-textStyle-alignLeft" align="left"></div>\n                        </div>\n                        <div class="Eleditor-textStyle-item">\n                            <div class="Eleditor-textStyle-align Eleditor-textStyle-alignCenter" align="center">\n                            </div>\n                        </div>\n                        <div class="Eleditor-textStyle-item">\n                            <div class="Eleditor-textStyle-align Eleditor-textStyle-alignRight" align="right">\n                            </div>\n                        </div>\n                        <div class="Eleditor-textStyle-item Eleditor-textStyle-item-upImg">\n                            <div class="Eleditor-textStyle-upImg"></div>\n                        </div>\n                    </div>\n                    <div class="Eleditor-textEditor-colors">\n                        <div class="Eleditor-textEditor-modulePane"><span></span></div>\n                        <ul>\n                            <li><span style="background-color:#232323;"></span></li>\n                            <li><span style="background-color:#2196F3;"></span></li>\n                            <li><span style="background-color:#795548;"></span></li>\n                            <li><span style="background-color:#00BCD4;"></span></li>\n                            <li><span style="background-color:#4CAF50;"></span></li>\n                            <li><span style="background-color:#E666E5;"></span></li>\n                            <li><span style="background-color:#FF9800;"></span></li>\n                            <li><span style="background-color:#FF5722;"></span></li>\n                            <li><span style="background-color:#ff2a1a;"></span></li>\n                            <li><span style="background-color:#FFEB3B;"></span></li>\n                            <li><span style="background-color:#ffffff;border: 1px solid #ccc;"></span></li>\n                            <li>\n                                <span class="Eleditor-inheritValue" style="background-color:transparent; border: 1px solid #dedede;">\n                                </span>\n                            </li>\n                        </ul>\n                    </div>\n                    <div class="Eleditor-textEditor-fontsizes">\n                        <div class="Eleditor-textEditor-modulePane"><span>字体大小</span></div>\n                        <ul>\n                            <li class="Eleditor-inheritValue">默认</li>\n                            <li>14px</li>\n                            <li>16px</li>\n                            <li>20px</li>\n                            <li>28px</li>\n                            <li>35px</li>\n                        </ul>\n                    </div>\n                    <div class="Eleditor-textEditor-lineheight">\n                        <div class="Eleditor-textEditor-modulePane"><span>行高</span></div>\n                        <ul>\n                            <li class="Eleditor-inheritValue">默认</li>\n                            <li>20px</li>\n                            <li>25px</li>\n                            <li>30px</li>\n                            <li>35px</li>\n                            <li>40px</li>\n                        </ul>\n                    </div>\n                    <div class="Eleditor-textEditor-linedecorations">\n                        <div class="Eleditor-textEditor-modulePane"><span>文本修饰</span></div>\n                        <ul>\n                            <li class="Eleditor-inheritValue">无</li>\n                            <li style="text-decoration: overline">上划线修饰</li>\n                            <li style="text-decoration: line-through">删除线修饰</li>\n                            <li style="text-decoration: underline">下划线修饰</li>\n                        </ul>\n                    </div>\n                    <div class="Eleditor-textEditor-formats">\n                        <div class="Eleditor-textEditor-format"></div>\n                        <div class="Eleditor-textEditor-clean"></div>\n                    </div>\n                    <div class="Eleditor-inputarea">\n                        <input placeholder="请输入超链接" type="text" />\n                        <div class="textarea" contenteditable="true"></div>\n                    </div>\n                    <div class="Eleditor-method">\n                        <button class="Eleditor-commit">提交</button>\n                        <button class="Eleditor-cancel">取消</button>\n                    </div>\n                </div>\n            </div>\n            '}function i(e){M.selectors._$selected=e;e.addClass("Eleditor-active");var t=e.offset().top+e.outerHeight();$.each(M.selectors._$editorController.find("li"),function(e,t){var o=$(t),r=o.attr("bind-tags");r&&(r=r.toLocaleLowerCase().split(","),(0,y._inArray)(M.selectors._$selected[0].tagName.toLocaleLowerCase(),r)?o.show():o.hide())}),M.selectors._$editorController.removeClass("out").addClass("in"),"function"==typeof M.selectors._$scrollWrap.animate?M.selectors._$scrollWrap.stop().animate({scrollTop:t-150+"px"},500):M.selectors._$scrollWrap.scrollTop(t-150+"px"),m._controllerUploader&&m._controllerUploader.refresh()}function s(){M.selectors._$wrap.find(".Eleditor-active").removeClass("Eleditor-active"),M.selectors._$editorController.removeClass("in").addClass("out")}function n(){(0,y._inArray)("insertImage",x.default.toolbars)&&M.selectors._$editorBarUploadImageBtn.show(),M.selectors._$editorController.removeClass("in").addClass("out"),M.selectors._$editorWrap.addClass("Eleditor-mask"),M.selectors._lastScrollH=M.selectors._$window.scrollTop(),M.selectors._$scrollWrap.addClass("Eleditor-scrollLocked")}function d(){M.selectors._$editorWrap.removeClass("Eleditor-mask out"),M.selectors._$scrollWrap.removeClass("Eleditor-scrollLocked"),M.selectors._$window.scrollTop(M.selectors._lastScrollH)}function a(){M.selectors._showEditorWrapMask(),M.selectors._$editorLoadingMask.show(),M.selectors._$editorLoadingMask.html("<p>"+arguments[0]+"</p>")}function c(){d(),M.selectors._$editorLoadingMask.hide()}function u(e,t){e._historys.push(t),p(e)}function f(e){if(0!==e._historys.length){var t=e._historys.pop();if("insertNode"==t.m&&t.node.remove(),"editNode"==t.m&&t.node.attr("style",t.unode.attr("style")||"").html(t.unode),"deleteNode"==t.m&&(t.pnode.length>0?t.pnode.after(t.node):M.selectors._$wrap.prepend(t.node),M.selectors._$wrap.find(".Eleditor-placeholder").remove()),"deleteBeforeNode"==t.m)for(var o=t.bnode.length-1;o>=0;o--)t.node.before(t.bnode[o]);"deleteAfterNode"==t.m&&t.node.after(t.anode),p()}}function p(e){0==e._historys.length?M.selectors._$editorUndoBtn.hide():M.selectors._$editorUndoBtn.show()}function _(){M.selectors._$selected&&M.selectors._$editorController.css({top:_$selected.offset().top+_$selected.outerHeight(),width:_$wrap.width()-5})}Object.defineProperty(t,"__esModule",{value:!0}),t._correctHtmlStructure=void 0;var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}();t._buildEditorModule=l,t._showEditorControllerLayer=i,t._hideEditorControllerLayer=s,t._showEditorWrapMask=n,t._hideEditorWrapMask=d,t._showLoadingMask=a,t._hideLoadingMask=c,t._appendHistory=u,t._handleHistory=f,t._flushHistoryBtn=p,t._flushEditorControllerLayerPosi=_;var h=o(0),x=function(e){return e&&e.__esModule?e:{default:e}}(h),y=o(3),m=o(7),g=o(5),b=o(8),M=o(1),T=o(4),C=function(){function e(t){r(this,e),this.init(t)}return E(e,[{key:"init",value:function(e){console.log("|--Eleditor Initing"),(0,y._scriptPath)();var t=Object.assign({},x.default,e);Object.assign(x.default,e);var o=(0,y._genEditorUid)();if(this._historys=[],t.el instanceof jQuery)var r=t.el;else{var r=$(t.el);if(0===r.length)return console.warn("|--Eleditor "+t.el+"元素不存在，请在DOMContentLoaded后初始化Eleditor");if(1!=r.length)var r=$(r[0])}if("true"===r.attr("Eleditor-Inited"))return console.warn("|--Eleditor "+t.el+"已经绑定了Eleditor");r.attr({"Eleditor-Inited":"true","Eleditor-Uid":o}),S(r,t.placeHolder);var n=$(l(t.toolbars,o));r.addClass("Eleditor-area"),r.after(n),(0,M.initele)(n,r),console.log("|--Eleditor Mounted To",r),(0,g.initEvent)(t);r.on("click","*",function(e){var t=$(this);return t.hasClass("Eleditor-active")||(s(),i(t)),0==e.preventDefault()}),(0,b.initTool)(this),(0,m.initUpload)(this),this.Text=new T.Text(this)}},{key:"append",value:function(){return M.selectors._$wrap.find(".Eleditor-placeholder").remove(),M.selectors._$wrap.append(arguments[0])}},{key:"getEditNode",value:function(){return null===_$selected&&console.warn("未选中状态getEditNode返回null"),_$selected}},{key:"getContent",value:function(){return M.selectors._$wrap.html()}},{key:"getContentText",value:function(){return(0,y._formatInnerText)(M.selectors._$wrap.text())}},{key:"destory",value:function(){M.selectors._$wrap.removeAttr("Eleditor-Inited Eleditor-Uid"),M.selectors._$wrap.removeClass("Eleditor-area"),M.selectors._$wrap.find(".Eleditor-placeholder").remove(),M.selectors._$wrap.off().find(".Eleditor-active").removeClass("Eleditor-active"),M.selectors._$editorWrap.find("*").off(),M.selectors._$editorWrap.remove(),console.log("|--Eleditor "+this._editorUid+" destoryed")}}]),e}();t.default=C;var S=t._correctHtmlStructure=function(e,t){""==(0,y._formatInnerText)(e.text())&&0===e.find("img").length&&e.append(t),0===e.find("*").length&&e.html('<p class="Eleditor-placeholder">'+e.html()+"</p>")}},function(e,t,o){"use strict";function r(){var e=document.scripts;e=e[e.length-1].src.substring(0,e[e.length-1].src.lastIndexOf("/")+1);var t='<link rel="stylesheet" href="'+e+"layout/base.css"+(a.default._debug?"?v="+ +new Date:"")+'">';return $("head").append(t),e}function l(e,t){for(var o in t)if(t[o]==e)return!0;return!1}function i(e){var t=e.replace(/\ +/g,"");return t=e.replace(/[ ]/g,""),t=e.replace(/[\r\n]/g,""),t.replace(/(^\s*)|(\s*$)/g,"")}function s(){var e=Math.max.apply(null,$.map($("body *"),function(e){var t=$(e);if("static"!=t.css("position"))return parseInt(t.css("z-index"))||1}));return(e+"").indexOf("Infinity")>=0?1:e+1}function n(){return""+ +new Date}Object.defineProperty(t,"__esModule",{value:!0}),t._scriptPath=r,t._inArray=l,t._formatInnerText=i,t._getLayerMaxZIndex=s,t._genEditorUid=n;var d=o(0),a=function(e){return e&&e.__esModule?e:{default:e}}(d)},function(e,t,o){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Text=void 0;var l=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),i=o(3),s=o(1),n=o(2);t.Text=function(){function e(t){r(this,e),this.bindevent(t)}return l(e,[{key:"_syncRenderTextEditorView",value:function(e){s.selectors._$editorTextModule.attr("role","edit").show(),s.selectors._$editorTextArea.html(s.selectors._$selected.hasClass("Eleditor-placeholder")?"":s.selectors._$selected.html()),s.selectors._$editorTextArea.attr("style",s.selectors._$selected.attr("style")),"bold"==s.selectors._$selected.css("font-weight")&&s.selectors._$editorTextModule.find(".Eleditor-textStyle-bold").addClass("Eleditor-active"),(0,i._inArray)(s.selectors._$selected.css("text-decoration"),["overline","line-through","underline"])&&s.selectors._$editorTextModule.find(".Eleditor-textStyle-linedecoration").addClass("Eleditor-active"),"A"==s.selectors._$selected[0].tagName?(s.selectors._$editorTextModule.attr("type","link"),s.selectors._$editorTextLinkArea.val(s.selectors._$selected.attr("href"))):s.selectors._$editorTextModule.attr("type","word");var t=s.selectors._$selected.css("text-align");(0,i._inArray)(t,["left","center","right"])?s.selectors._$editorTextModule.find(".Eleditor-textStyle-align[align="+t+"]").addClass("Eleditor-active"):s.selectors._$editorTextModule.find(".Eleditor-textStyle-align").removeClass("Eleditor-active"),s.selectors._$editorTextModule.find(".Eleditor-textStyle-color span").css("background-color",s.selectors._$selected.css("color"))}},{key:"bindevent",value:function(e){s.selectors._$editorTextModule.on("click",".Eleditor-textStyle-bold",function(){s.selectors._$editorTextArea.css("font-weight",$(this).hasClass("Eleditor-active")?"normal":"bold"),$(this).toggleClass("Eleditor-active")}),s.selectors._$editorTextModule.on("click",".Eleditor-textStyle-linedecoration",function(){s.selectors._$editorLinedecorationsModule.show(),$(this).addClass("Eleditor-active")}),s.selectors._$editorTextModule.on("click",".Eleditor-textStyle-color,.Eleditor-textStyle-bgColor",function(){var e=$(this),t=e.hasClass("Eleditor-textStyle-bgColor")?"bgcolor":"color";s.selectors._$editorColorModule.find(".Eleditor-textEditor-modulePane span").html("bgcolor"==t?"文字背景颜色":"文字颜色"),s.selectors._$editorColorModule.attr("role",t).show(),$(this).addClass("Eleditor-active")}),s.selectors._$editorTextModule.on("click",".Eleditor-textStyle-fontSize",function(){s.selectors._$editorFontsizeModule.show(),$(this).addClass("Eleditor-active")}),s.selectors._$editorTextModule.on("click",".Eleditor-textStyle-lineHeight",function(){s.selectors._$editorLineheightModule.show(),$(this).addClass("Eleditor-active")}),s.selectors._$editorLinedecorationsModule.on("click","ul li",function(){$(this).hasClass("Eleditor-inheritValue")?(s.selectors._$editorTextArea.css("text-decoration","inherit"),s.selectors._$editorTextModule.find(".Eleditor-textStyle-linedecoration").removeClass("Eleditor-active")):s.selectors._$editorTextArea.css("text-decoration",$(this).css("text-decoration")),s.selectors._$editorLinedecorationsModule.hide()}),s.selectors._$editorLineheightModule.on("click","ul li",function(){$(this).hasClass("Eleditor-inheritValue")?(s.selectors._$editorTextArea.css("line-height","inherit"),s.selectors._$editorTextModule.find(".Eleditor-textStyle-lineHeight").removeClass("Eleditor-active")):s.selectors._$editorTextArea.css("line-height",$(this).html()),s.selectors._$editorLineheightModule.hide()}),s.selectors._$editorFontsizeModule.on("click","ul li",function(){$(this).hasClass("Eleditor-inheritValue")?(s.selectors._$editorTextArea.css("font-size","inherit"),s.selectors._$editorTextModule.find(".Eleditor-textStyle-fontSize").removeClass("Eleditor-active")):s.selectors._$editorTextArea.css("font-size",$(this).html()),s.selectors._$editorFontsizeModule.hide()}),s.selectors._$editorTextModule.on("click",".Eleditor-textStyle-align",function(){var e=$(this).attr("align");s.selectors._$editorTextArea.css({"text-align":e,display:"block"}),s.selectors._$editorTextModule.find(".Eleditor-textStyle-align.Eleditor-active").removeClass("Eleditor-active"),$(this).addClass("Eleditor-active")}),s.selectors._$editorTextModule.on("click",".Eleditor-textEditor-format",function(){var e=s.selectors._$editorTextArea,t="style width height border bgcolor align color";e.removeAttr(t),$.each(e.find("*"),function(o,r){var l=e.find(r);(0,i._inArray)(r.tagName.toLocaleLowerCase(),["script","style"])?l.remove():l.removeAttr(t)}),s.selectors._$editorTextArea.html(e.html()),s.selectors._$editorTextModule.find(".Eleditor-active").removeClass("Eleditor-active")}),s.selectors._$editorTextModule.on("click",".Eleditor-textEditor-clean",function(){confirm("确定清空内容（不可恢复）？")&&s.selectors._$editorTextArea.html("")}),s.selectors._$editorTextModule.on("click",".Eleditor-cancel,.Eleditor-commit",function(){if(arguments[0].preventDefault(),$(this).hasClass("Eleditor-commit")){var t=s.selectors._$editorTextArea.attr("style")||"",o=s.selectors._$editorTextArea.html(),r=s.selectors._$selected.clone();if(!o)return alert("请输入内容文字");if("edit"==s.selectors._$editorTextModule.attr("role")||s.selectors._$selected.hasClass("Eleditor-placeholder")){if("link"==s.selectors._$editorTextModule.attr("type")){var l=s.selectors._$editorTextLinkArea.val();_$selected.attr("href",l)}s.selectors._$selected.attr("style",t).removeClass("Eleditor-placeholder").html(o),(0,n._appendHistory)(e,{m:"editNode",node:s.selectors._$selected,unode:r})}else{var i="";if("link"==s.selectors._$editorTextModule.attr("type")){var l=s.selectors._$editorTextLinkArea.val();i='<a target="_BLANK" style="'+t+'" href="'+l+'">'+o+"</a>"}else i='<p style="'+t+'">'+o+"</p>";var i=$(i);s.selectors._$selected.after(i),(0,n._appendHistory)(e,{m:"insertNode",node:i})}}s.selectors._$editorTextModule.find(".Eleditor-active").removeClass("Eleditor-active"),s.selectors._$editorTextModule.find(".Eleditor-textStyle-color span").removeAttr("style"),s.selectors._$editorTextArea.removeAttr("style").html(""),s.selectors._$editorTextLinkArea.val(""),(0,n._hideEditorWrapMask)(),s.selectors._$editorTextModule.hide(),(0,n._hideEditorControllerLayer)()}),s.selectors._$editorColorModule.on("click","ul li span",function(){var e=$(this).css("background-color");"color"==s.selectors._$editorColorModule.attr("role")?$(this).hasClass("Eleditor-inheritValue")?(s.selectors._$editorTextArea.css("color","inherit"),s.selectors._$editorTextModule.find(".Eleditor-textStyle-color").removeClass("Eleditor-active").find("span").removeAttr("style")):(s.selectors._$editorTextArea.css("color",e),s.selectors._$editorTextModule.find(".Eleditor-textStyle-color span").css("background-color",e)):$(this).hasClass("Eleditor-inheritValue")?(s.selectors._$editorTextArea.css("background-color","inherit"),s.selectors._$editorTextModule.find(".Eleditor-textStyle-bgColor").removeClass("Eleditor-active")):s.selectors._$editorTextArea.css("background-color",e),s.selectors._$editorColorModule.hide()})}}]),e}()},function(e,t,o){"use strict";function r(){for(var e=0;e<n.default.toolbars.length;e++)"object"===l(n.default.toolbars[e])&&(c[n.default.toolbars[e].id]=n.default.toolbars[e].handle)}Object.defineProperty(t,"__esModule",{value:!0}),t._editorModuleEvents=void 0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.initEvent=r;var i=o(3),s=o(0),n=function(e){return e&&e.__esModule?e:{default:e}}(s),d=(o(4),o(1)),a=o(2),c=t._editorModuleEvents={insertText:function(e){(0,a._showEditorWrapMask)(),d.selectors._$editorTextModule.attr({role:"insert",type:"word"}).show()},insertLink:function(e){(0,a._showEditorWrapMask)(),d.selectors._$editorTextModule.attr({role:"insert",type:"link"}).show()},insertImage:function(e){"undefined"==typeof WebUploader&&alert("图片上传请手动引入插件根目录webuploader.min.js")},insertHr:function(e){var t=$('<div class="horizontal-line" style="padding: 10px 0;border-bottom: 1px solid #aaa;margin-bottom: 20px;"></div>');d.selectors._$selected.after(t),(0,a._appendHistory)(e,{m:"insertNode",node:t}),(0,a._hideEditorControllerLayer)()},editText:function(e){if((0,i._inArray)(d.selectors._$selected[0].tagName,n.default._notctname))return this.insertText(e);(0,a._showEditorWrapMask)(),e.Text._syncRenderTextEditorView(e)},deleteThis:function(e){(0,a._appendHistory)(e,{m:"deleteNode",node:d.selectors._$selected,pnode:d.selectors._$selected.prev()}),d.selectors._$selected.remove(),(0,a._hideEditorControllerLayer)(),(0,a._correctHtmlStructure)(d.selectors._$wrap,n.default.placeHolder)},deleteBefore:function(e){var t=d.selectors._$selected.prev();(0,a._appendHistory)(e,{m:"deleteBeforeNode",node:d.selectors._$selected,bnode:d.selectors._$selected.prevAll()});for(var o;t.length>0;)o=t.prev(),t.remove(),t=o;for(var r=d.selectors._$selected.parent();r.length>0&&!r.hasClass("Eleditor-area");){for(t=r.prev();t.length>0;)o=t.prev(),t.remove(),t=o;r=r.parent()}(0,a._hideEditorControllerLayer)(),(0,a._correctHtmlStructure)(d.selectors._$wrap,n.default.placeHolder)},deleteAfter:function(e){var t=d.selectors._$selected.next();(0,a._appendHistory)(e,{m:"deleteAfterNode",node:d.selectors._$selected,anode:d.selectors._$selected.nextAll()});for(var o;t.length>0;)o=t.next(),t.remove(),t=o;for(var r=d.selectors._$selected.parent();r.length>0&&!r.hasClass("Eleditor-area");){for(t=r.next();t.length>0;)o=t.next(),t.remove(),t=o;r=r.parent()}(0,a._hideEditorControllerLayer)(),(0,a._correctHtmlStructure)(d.selectors._$wrap,n.default.placeHolder)},undo:function(e){_handleHistory(),(0,a._hideEditorControllerLayer)()},cancel:function(e){(0,a._hideEditorControllerLayer)()}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MEditor=void 0;var r=o(2),l=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=l.default,t.MEditor=l.default},function(e,t,o){"use strict";function r(e){(0,s._inArray)("insertImage",i.default.toolbars)&&"undefined"!=typeof WebUploader&&(t._controllerUploader=a=WebUploader.create({auto:!0,server:i.default.upload.server||"/upload",pick:n.selectors._$editorUploadImageBtn,duplicate:!0,resize:!1,fileSingleSizeLimit:i.default.upload.fileSizeLimit?1024*i.default.upload.fileSizeLimit*1024:void 0,accept:{title:"Images",extensions:"gif,jpg,jpeg,bmp,png,webp",mimeTypes:"image/gif,image/jpg,image/jpeg,image/bmp,image/png,image/webp"}}),a.on("uploadStart",function(e,t){(0,d._hideEditorControllerLayer)(),_showLoadingMask('上传图片中<span id="uploadProgress">1</span>%')}),a.on("uploadProgress",function(e,t){$("#uploadProgress").html(parseFloat((100*t).toFixed(2)))}),a.on("error",function(){"Q_TYPE_DENIED"==arguments[0]&&alert("请上传图片格式文件"),"F_EXCEED_SIZE"==arguments[0]&&alert("文件大小不能超过"+arguments[1]/1048576+"M")}),a.on("uploadComplete",function(){e._hideLoadingMask()}),a.on("uploadSuccess",function(t,o){if(1==o.status){var r=$('<img src="'+o.url+'">');n.selectors._$selected.after(r),(0,d._appendHistory)(e,{m:"insertNode",node:r})}else alert(o.msg)}),t._stylebarUploader=c=WebUploader.create({auto:!0,server:i.default.upload.server||"/upload",pick:n.selectors._$editorBarUploadImageBtn,duplicate:!0,resize:!1,compress:!1,fileSingleSizeLimit:i.default.upload.fileSizeLimit?1024*i.default.upload.fileSizeLimit*1024:void 0,accept:{title:"Images",extensions:"gif,jpg,jpeg,bmp,png,webp",mimeTypes:"image/gif,image/jpg,image/jpeg,image/bmp,image/png,image/webp"}}),c.on("uploadStart",function(e,t){_showLoadingMask('上传图片中<span id="uploadProgress">1</span>%')}),c.on("uploadProgress",function(e,t){$("#uploadProgress").html(parseFloat((100*t).toFixed(2)))}),c.on("error",function(){"Q_TYPE_DENIED"==arguments[0]&&alert("请上传图片格式文件"),"F_EXCEED_SIZE"==arguments[0]&&alert("文件大小不能超过"+arguments[1]/1048576+"M")}),c.on("uploadComplete",function(){e._hideLoadingMask()}),c.on("uploadSuccess",function(e,t){1==t.status?n.selectors._$editorTextArea.append('<img src="'+t.url+'">'):alert(t.msg)}))}Object.defineProperty(t,"__esModule",{value:!0}),t._stylebarUploader=t._controllerUploader=void 0,t.initUpload=r;var l=o(0),i=function(e){return e&&e.__esModule?e:{default:e}}(l),s=o(3),n=(o(4),o(1)),d=o(2),a=t._controllerUploader=null,c=t._stylebarUploader=null},function(e,t,o){"use strict";function r(e){n.selectors._$editorController.on("click","ul li",function(){var t=$(this),o=t.attr("event");"function"==typeof s._editorModuleEvents[o]&&(void 0!==i.default._toolnames[o]?s._editorModuleEvents[o](e):!1!==s._editorModuleEvents[o](n.selectors._$selected,t)&&s._editorModuleEvents.cancel(e))})}Object.defineProperty(t,"__esModule",{value:!0}),t.initTool=r;var l=o(0),i=function(e){return e&&e.__esModule?e:{default:e}}(l),s=o(5),n=o(1)}])});